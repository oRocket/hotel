<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Albetop Hotel - Book Now</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/book.css">
    <link rel="icon" href="/images/icon.png">
</head>
<body>
    <!-- NAVIGATION BAR -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Albetop Hotel</a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#about">About Us</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rooms <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="index.html#standard">Standard</a></li>
                            <li><a href="index.html#vip">VIP</a></li>
                        </ul>
                    </li>
                    <li><a href="index.html#contact">Contact Us</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- BOOKING SECTION -->
    <div class="container">
        <div class="row">
            <div class="col-sm-8">
                <h1>Book Your Hotel Room</h1>
                <form class="form-horizontal" id="bookingForm" action="/book" method="post">
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="name">Full Name:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="name" name="name" placeholder="Enter full name" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="email">Email:</label>
                        <div class="col-sm-10">
                            <input type="email" class="form-control" id="email" name="email" placeholder="Enter email" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="phone_number">Phone Number:</label>
                        <div class="col-sm-10">
                            <input type="tel" class="form-control" id="phone_number" name="phone_number" placeholder="0123456789" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="check_in_date">Check In:</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control" id="check_in_date" name="check_in_date" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="check_out_date">Check Out:</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control" id="check_out_date" name="check_out_date" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="guests">Guests:</label>
                        <div class="col-sm-10">
                            <select id="guests" class="form-control" name="guests" required>
                                <option value="1">1 Guest</option>
                                <option value="2">2 Guests</option>
                                <option value="3">3 Guests</option>
                                <option value="4">4 Guests</option>
                                <option value="5">5 Guests</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="room_type">Room Type:</label>
                        <div class="col-sm-10">
                            <select id="room_type" class="form-control" name="room_type" required>
                                <option>Single Room</option>
                                <option>Double Room</option>
                                <option>Family Room</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="submit" class="btn btn-primary btn-block">Book Now</button>
                        </div>
                    </div>
                </form>
                <div id="bookingSuccess" class="alert alert-success" style="display:none;">
                    <h3>ALBETOP HOTEL</h3>
                    <h2>Booking Confirmed!</h2>
                    <p><strong>Full Name:</strong> <span id="fullName"></span></p>
                    <p><strong>Email:</strong> <span id="emailAddress"></span></p>
                    <p><strong>Unique Code:</strong> <span id="uniqueCode"></span></p>
                    <p><strong>Room Number:</strong> <span id="roomNumber"></span></p>
                    <p><strong>Room Type:</strong> <span id="roomType"></span></p>
                    <p><strong>Price:</strong> <span id="roomPrice"></span></p>
                    <p><strong>Capacity:</strong> <span id="roomCapacity"></span></p>
                    <p><strong>Description:</strong> <span id="roomDescription"></span></p>
                    <!-- Print/Save button -->
                    <button type="button" class="btn btn-primary" onclick="printBookingConfirmation()">Print/Save Receipt</button>
                </div>               
                <div id="bookingError" class="alert alert-danger" style="display:none;">
                    <h2>Booking Failed!</h2>
                    <p id="errorMessage"></p>
                </div>
            </div>
            <div class="col-sm-4">
                <h1>Rooms</h1>
                <div id="myCarousel" class="carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#myCarousel" data-slide-to="1"></li>
                        <li data-target="#myCarousel" data-slide-to="2"></li>
                        <li data-target="#myCarousel" data-slide-to="3"></li>
                        <li data-target="#myCarousel" data-slide-to="4"></li>
                        <li data-target="#myCarousel" data-slide-to="5"></li>
                    </ol>

                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                        <div class="item active">
                            <img src="/images/singleroom.jpg" alt="Single Room">
                            <div class="carousel-caption">
                                <h3>Single Room</h3>
                            </div>
                        </div>
                        <div class="item">
                            <img src="/images/doubleroom.jpg" alt="Double Room">
                            <div class="carousel-caption">
                                <h3>Double Room</h3>
                            </div>
                        </div>
                        <div class="item">
                            <img src="/images/honeymoon_room.jpg" alt="Honeymoon Room">
                            <div class="carousel-caption">
                                <h3>Honeymoon Room</h3>
                            </div>
                        </div>
                        <div class="item">
                            <img src="/images/queen_room.jpg" alt="Queen Room">
                            <div class="carousel-caption">
                                <h3>Queen Room</h3>
                            </div>
                        </div>
                        <div class="item">
                            <img src="/images/king_room.jpg" alt="King Room">
                            <div class="carousel-caption">
                                <h3>King Room</h3>
                            </div>
                        </div>
                        <div class="item">
                            <img src="/images/family_room.jpg" alt="Family Room">
                            <div class="carousel-caption">
                                <h3>Family Room</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Left and right controls -->
                    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="custom-footer">
        <div class="footer-container">
            <div class="row">
                <div class="col-md-4">
                    <h2>Contact Us</h2>
                    <ul class="list-unstyled">
                        <li><i class="fa fa-map-marker" aria-hidden="true"></i> Albetop Hotel, P. O. Box 7, Sunyani, Ghana</li>
                        <li><i class="fa fa-mobile" aria-hidden="true"></i> +233 209705826 / +233 501378473</li>
                        <li><i class="fa fa-envelope" aria-hidden="true"></i> <a href="mailto:hotel@albetop.com">hotel@albetop.com</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h2>Menu Link</h2>
                    <ul class="list-unstyled">
                        <li><a href="home.html" class="text-white">Home</a></li>
                        <li><a href="home.html#about" class="text-white">About</a></li>
                        <li><a href="home.html#rooms" class="text-white">Our Rooms</a></li>
                        <li><a href="home.html#contact" class="text-white">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h2>Newsletter</h2>
                    <form class="bottom_form">
                        <input class="form-control mb-2" placeholder="Enter your email" type="text" name="email">
                        <button class="btn btn-success">Subscribe</button>
                    </form>
                    <ul class="social_icon list-inline mt-3">
                        <li class="list-inline-item"><a href="https://www.facebook.com" class="text-white"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                        <li class="list-inline-item"><a href="https://www.x.com" class="www.x.com"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                        <li class="list-inline-item"><a href="https://www.linkedin.com" class="text-white"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
                        <li class="list-inline-item"><a href="https://www.youtube.com" class="text-white"><i class="fa fa-youtube-play" aria-hidden="true"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="text-center py-3">
            <div class="footer-container">
                <div class="row">
                    <div class="col-12">
                        <p>&copy; 2024 Albetop Hotel. All Rights Reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Include jQuery and Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- Booking Form Submission Script -->
    <script>
        $(document).ready(function() {
        $('#bookingForm').on('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting normally

            // Gather form data
            const formData = {
                name: $('#name').val(),
                email: $('#email').val(),
                phone_number: $('#phone_number').val(),
                check_in_date: $('#check_in_date').val(),
                check_out_date: $('#check_out_date').val(),
                guests: $('#guests').val(),
                room_type: $('#room_type').val()
            };

            // Send the form data to the server via AJAX
            $.ajax({
                type: 'POST',
                url: '/book',
                data: formData,
                success: function(response) {
                    // On success, show the booking success message and room details
                    $('#bookingSuccess').show();
                    $('#bookingError').hide();

                    // Update the booking details in the success message
                    $('#roomNumber').text(response.room.room_number);
                    $('#roomType').text(response.room.type);
                    $('#roomPrice').text(response.room.price);
                    $('#roomCapacity').text(response.room.capacity);
                    $('#roomDescription').text(response.room.description);
                    
                    // Additional details
                    $('#fullName').text(response.full_name);
                    $('#emailAddress').text(response.email);
                    $('#uniqueCode').text(response.uniqueCode);

                    // Optionally, clear the form fields
                    $('#bookingForm')[0].reset();
                },
                error: function(xhr) {
                    // On error, show the booking error message
                    $('#bookingSuccess').hide();
                    $('#bookingError').show();

                    // Update the error message
                    $('#errorMessage').text(xhr.responseText || 'An error occurred while booking your room. Please try again later.');
                }
            });
        });
    });
    // Function to print/save booking confirmation
    function printBookingConfirmation() {
        var printContents = document.getElementById('bookingSuccess').innerHTML;
        var originalContents = document.body.innerHTML;

        document.body.innerHTML = printContents;

        window.print();

        document.body.innerHTML = originalContents;
    }

    </script>
    
</body>
</html>
